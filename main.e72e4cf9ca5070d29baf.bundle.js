webpackJsonp([1],{0:function(e,t){},1:function(e,t){},2:function(e,t){},3:function(e,t){},5:function(e,t,n){e.exports=n("cDNt")},"6kpM":function(e,t,n){"use strict";var s=n("/oeL"),a=n("koeK"),i=(n.n(a),n("nVvX")),o=(n.n(i),n("x8nq")),r=(n.n(o),n("OGkG")),c=(n.n(r),n("xrDH")),l=(n.n(c),n("XKz0")),d=n("xpf9");n.n(d);n.d(t,"a",function(){return h});var p=this&&this.__decorate||function(e,t,n,s){var a,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e){this.http=e,this.apiURI={"btc/livenet":"https://api.bitcore.io/api/BTC/mainnet/","btc/testnet":"https://api.bitcore.io/api/BTC/testnet/","bch/livenet":"https://api.bitcore.io/api/BCH/mainnet/","bch/testnet":"https://api.bitcore.io/api/BCH/testnet/","bsv/livenet":"https://bchsvexplorer.com/api/"},this.activeAddrCoinType="",this.stopSearching=!1,this.PATHS={BIP45:["m/45'/2147483647/0","m/45'/2147483647/1"],BIP44:{btc:{testnet:["m/44'/1'/ACCOUNT'/0","m/44'/1'/ACCOUNT'/1","m/48'/1'/ACCOUNT'/0","m/48'/1'/ACCOUNT'/1"],livenet:["m/44'/0'/ACCOUNT'/0","m/44'/0'/ACCOUNT'/1","m/48'/0'/ACCOUNT'/0","m/48'/0'/ACCOUNT'/1"]},bch:{livenet:["m/44'/145'/ACCOUNT'/0","m/44'/145'/ACCOUNT'/1","m/48'/145'/ACCOUNT'/0","m/48'/145'/ACCOUNT'/1","m/44'/0'/ACCOUNT'/0","m/44'/0'/ACCOUNT'/1"],testnet:["m/44'/1'/ACCOUNT'/0","m/44'/1'/ACCOUNT'/1","m/48'/1'/ACCOUNT'/0","m/48'/1'/ACCOUNT'/1"]},bsv:{livenet:["m/44'/0'/ACCOUNT'/0","m/44'/0'/ACCOUNT'/1","m/44'/145'/ACCOUNT'/0","m/44'/145'/ACCOUNT'/1"]}}}}e.prototype.fromBackup=function(e,t,n,s,i){try{JSON.parse(e.backup)}catch(e){throw console.log(e),new Error("JSON invalid. Please copy only the text within (and including) the { } brackets around it.")}var o;try{o=a.decrypt(e.password,e.backup)}catch(e){throw console.log(e),new Error("Incorrect backup password")}o=JSON.parse(o);var r=o.credentials?o.credentials:o,c=o.key?o.key:o;if(!r.n)throw new Error("Backup format not recognized. If you are using a Copay Beta backup and version is older than 0.10, please see: https://github.com/bitpay/copay/issues/4730#issuecomment-244522614");if(r.m!==t||r.n!==n)throw new Error("The wallet configuration (m-n) does not match with values provided.");if(r.network!==i)throw new Error("Incorrect network.");if(!c.xPrivKeyEncrypted&&!c.xPrivKey)throw new Error("The backup does not have a private key");var l=c.xPrivKey;if(c.xPrivKeyEncrypted)try{l=a.decrypt(e.xPrivPass,c.xPrivKeyEncrypted)}catch(e){throw console.log(e),new Error("Can not decrypt private key")}var d=r.rootPath?this.getDerivationStrategy(r.rootPath):r.derivationStrategy?r.derivationStrategy:"BIP45";return{walletId:r.walletId,copayerId:r.copayerId,publicKeyRing:r.publicKeyRing,xPriv:l,derivationStrategy:d,addressType:"BIP45"===d?"P2SH":r.addressType,m:t,n:n,network:i,coin:s,from:"backup"}},e.prototype.checkAngularCryptoConfig=function(){try{new r("imitate type scorpion whip oil cheese achieve rail organ donkey note screen").toHDPrivateKey("","testnet").toString()}catch(e){return console.log(e),"Before starting, check the angular cli configuration described in the README/Installation section"}return null},e.prototype.fromMnemonic=function(e,t,n,s,a){if(!e.backup)return null;var i,o=c.trim(e.backup),l=e.password;try{i=new r(o).toHDPrivateKey(l,a).toString()}catch(e){throw console.log(e),new Error("Mnemonic wallet seed is not valid.")}return{xPriv:i,derivationStrategy:"BIP44",addressType:1===n?"P2PKH":"P2SH",m:t,n:n,network:a,coin:s,from:"mnemonic"}},e.prototype.buildWallet=function(e){var t;if(e=c.compact(e),0===e.length)throw new Error("No data provided");if(1!==c.uniq(c.map(e,"from")).length)throw new Error("Mixed backup sources not supported");if(t=c.pick(e[0],["walletId","derivationStrategy","addressType","m","n","network","from","coin","publicKeyRing"]),t.copayers=c.map(e,function(e){if(e.walletId!==t.walletId)throw new Error("Backups do not belong to the same wallets.");return{copayerId:e.copayerId,xPriv:e.xPriv}}),"backup"===t.from&&c.uniq(c.compact(c.map(t.copayers,"copayerId"))).length!==t.copayers.length)throw new Error("Some of the backups belong to the same copayers");return console.log("Recovering wallet",t),t},e.prototype.getWallet=function(e,t,n,s,a){var r=this,l=c.map(e,function(e){return e.backup=c.trim(e.backup),"{"===e.backup.charAt(0)?r.fromBackup(e,t,n,s,a):r.fromMnemonic(e,t,n,s,a)});if("btc"===s)this.bitcore=i;else{if("bch"!==s&&"bsv"!==s)throw new Error("Unknown coin "+s);this.bitcore=o}return this.buildWallet(l)},e.prototype.scanWallet=function(e,t,n,s,a,i){var o;this.getActiveAddresses(e,n,s,a,function(e,n){if(e)return i(e);o=c.flatten(c.map(n,"utxo"));var s={addresses:c.uniq(n),balance:"bsv"===t?c.sumBy(o,"amount"):c.sumBy(n,"balance")};return i(null,s)})},e.prototype.getPaths=function(e,t){if("BIP45"===e.derivationStrategy){for(var n=c.clone(this.PATHS[e.derivationStrategy]),s=0;s<e.n;s++){var a=["m/45'/"+s+"/0","m/45'/"+s+"/1"];n=n.concat(a)}return n}if("BIP44"===e.derivationStrategy){return this.getPathsWithAccount(e,t)[e.derivationStrategy][e.coin][e.network]}},e.prototype.getPathsWithAccount=function(e,t){var n=c.cloneDeep(this.PATHS);return n[e.derivationStrategy][e.coin][e.network].forEach(function(s,a){n[e.derivationStrategy][e.coin][e.network][a]=s.replace(/ACCOUNT/,""+t)}),n},e.prototype.getHdDerivations=function(e,t){var n=this,s=function(e,t,s){var a=n.bitcore.HDPrivateKey(e);return s?a.deriveChild(t):a.deriveNonCompliantChild(t)},a=function(e){if(1===e.length)return e[0];return function(e,t){for(var n=[],s=0;s<e.length;s++)for(var a=0;a<t.length;a++)n.push(c.flatten([e[s],t[a]]));return n}(e[0],a(c.tail(e)))},i=c.map(e.copayers,"xPriv"),o=[];return c.each(this.getPaths(e,t),function(e){var t=a(c.map(i,function(t,n){var a=s(t,e,!0),i=s(t,e,!1),o=[];return o.push({copayer:n+1,path:e,compliant:!0,key:a}),a.toString()!==i.toString()&&o.push({copayer:n+1,path:e,compliant:!1,key:i}),o}));o=o.concat(t)}),o},e.prototype.getActiveAddresses=function(e,t,n,s,a){var i,o=this,r=[],l=this.getHdDerivations(e,n),d=function(e){if(e>=l.length)return a(null,c.uniqBy(r,"address"));i=0,p(l[e],0,function(t,n){if(t)return a(t);d(e+1)})},p=function(n,a,l){if(o.stopSearching)return l(null);var d=n.path||n[0].path;if(i>t||null===d.match(o.activeAddrCoinType))return l();var u=o.generateAddress(e,n,a);o.checkAddressData(u,e.coin,e.network,function(t,u){if(t)return l(t);c.isEmpty(u)?i++:(u.balance=1e-8*u.balance,console.log("#Active address:",u,n,e.network),"BIP45"!==e.derivationStrategy&&(o.activeAddrCoinType=o.getActiveAddrCoinType(e,d)),r.push(u),i=0),s(i,c.uniqBy(r,"address")),p(n,a+1,l)})};d(0)},e.prototype.getActiveAddrCoinType=function(e,t){return"btc"===e.coin&&"livenet"===e.network?t.match(/m\/44\'\/0\'/)?"m/44'/0'":"m/48'/0'":"btc"===e.coin&&"testnet"===e.network?t.match(/m\/44\'\/1\'/)?"m/44'/1'":"m/48'/1'":"bch"===e.coin&&"livenet"===e.network?t.match(/m\/44\'\/145\'/)?"m/44'/145'":t.match(/m\/48\'\/145\'/)?"m/48'/145'":"m/44'/0'":"bch"===e.coin&&"testnet"===e.network?t.match(/m\/44\'\/1\'/)?"m/44'/1'":"m/48'/1'":t},e.prototype.generateAddress=function(e,t,n){var s=this,a=[],i=[];if(c.each([].concat(t),function(e){var t=s.bitcore.HDPrivateKey(e.key),o=t.deriveChild(n).privateKey;a.push(o),i.push(o.publicKey)}),e.publicKeyRing){var o,r=[].concat(t),l=r[0].path.split("/"),d=parseInt(c.last(l).toString(),10);i=[],e.publicKeyRing.forEach(function(t){if("BIP45"===e.derivationStrategy){var a=parseInt(c.nth(l,-2).toString(),10);o=new s.bitcore.HDPublicKey(t.xPubKey).deriveChild(a).deriveChild(d).deriveChild(n)}else"BIP44"===e.derivationStrategy&&(o=new s.bitcore.HDPublicKey(t.xPubKey).deriveChild(d).deriveChild(n));i.push(o.publicKey)})}var p;if("P2SH"===e.addressType)p=this.bitcore.Address.createMultisig(i,e.m,e.network);else{if("P2PKH"!==e.addressType)throw new Error("Address type not supported");p=this.bitcore.Address.fromPublicKey(i[0],e.network)}return{addressObject:p,pubKeys:i,privKeys:a,info:t,index:n}},e.prototype.checkAddressData=function(e,t,n,s){"bsv"===t?this.getAddressDataBsv(e,t,n,s):this.checkAddress(e,t,n,s)},e.prototype.getBsvAddressFromLegacy=function(e){var t=i.Address(e).toObject();return this.bitcore.Address.fromObject(t).toString(!0)},e.prototype.getAddressDataBsv=function(e,t,n,s){var a=this;this.checkAddressBsv(e.addressObject,t,n).then(function(i){i.subscribe(function(i){a.getAddressTxos(e.addressObject.toCashAddress(),t,n).subscribe(function(t){var n=a.getBsvAddressFromLegacy(i.addrStr),o=[];t.forEach(function(e){e.address=a.getBsvAddressFromLegacy(e.address),o.push(e)});var r={address:n,balance:i.balance,unconfirmedBalance:i.unconfirmedBalance,utxo:o,privKeys:e.privKeys,pubKeys:e.pubKeys,info:e.info,index:e.index,isActive:i.unconfirmedTxApperances+i.txApperances>0};setTimeout(function(){return r.isActive?s(null,r):s()},1e3)})})})},e.prototype.checkAddressBsv=function(e,t,n){var s=this,a=e.toString(),i=this.apiURI[t+"/"+n]+"addr/"+a+"?noTxList=1";return new Promise(function(e){e(s.http.get(i))})},e.prototype.checkAddress=function(e,t,n,s){var a=e.addressObject.toString(!0);this.getAddressTxos(a,t,n).subscribe(function(t){var n=c.filter(t,["spentHeight",-2]),i={address:a,balance:c.sumBy(n,"value"),utxo:n,privKeys:e.privKeys,pubKeys:e.pubKeys,info:e.info,index:e.index,isActive:t.length>0};setTimeout(function(){return i.isActive?s(null,i):s()},1e3)},function(e){return s(e)})},e.prototype.getAddressTxos=function(e,t,n){var s;return s="bsv"===t?this.apiURI[t+"/"+n]+"addr/"+e+"/utxo?noCache=1":this.apiURI[t+"/"+n]+"address/"+e+"/?limit=999",this.http.get(s).catch(function(e){throw e})},e.prototype.createRawTx=function(e,t,n,s){if(!e||!this.bitcore.Address.isValid(e))throw new Error("Please enter a valid address.");var a=parseInt((1e8*t.balance-1e8*s).toFixed(0),10);if(a<=0)throw new Error("Funds are insufficient to complete the transaction");console.log("Generating a "+n.coin+" transaction");try{var i=new this.bitcore.Address(e,n.network);console.log("Check address: ",i)}catch(e){throw console.log(e),new Error("Incorrect destination address network")}try{var o=[],r=new this.bitcore.Transaction;c.each(t.addresses,function(e){e.utxo.length>0&&c.each(e.utxo,function(t){"bsv"!==n.coin&&(t.txid=t.mintTxid,t.outputIndex=t.mintIndex,t.satoshis=t.value),"P2SH"===n.addressType?r.from(t,e.pubKeys,n.m):r.from(t),o=o.concat(e.privKeys.slice(0,n.m))})}),r.to(e,a),r.sign(c.uniq(o));var l=r.serialize();return console.log("Raw transaction: ",l),l}catch(e){throw console.log(e),new Error("Could not build tx: "+e)}},e.prototype.txBroadcast=function(e,t,n){var s,a;return"bsv"===t?(s="https://api.blockchair.com/bitcoin-sv/push/transaction",a={data:e}):(s=this.apiURI[t+"/"+n]+"tx/send",a={rawTx:e}),console.log("Posting tx to..."+s),this.http.post(s,a).catch(function(e){throw e})},e.prototype.parsePath=function(e){return{purpose:e.split("/")[1],coinCode:e.split("/")[2],account:e.split("/")[3]}},e.prototype.getDerivationStrategy=function(e){var t,n=this.parsePath(e).purpose;switch(n){case"45'":t="BIP45";break;default:t="BIP44"}return t};var t;return e=p([n.i(s.c)(),u("design:paramtypes",["function"==typeof(t=void 0!==l.b&&l.b)&&t||Object])],e)}()},W675:function(e,t,n){t=e.exports=n("rP7Y")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"aR8+":function(e,t,n){"use strict";var s=n("fc+i"),a=n("/oeL"),i=n("bm2B"),o=n("XKz0"),r=n("wQAS");n.d(t,"a",function(){return l});var c=this&&this.__decorate||function(e,t,n,s){var a,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},l=function(){function e(){}return e=c([n.i(a.b)({declarations:[r.a],imports:[s.a,i.a,o.a],providers:[],bootstrap:[r.a]})],e)}()},cDNt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("/oeL"),a=n("Qa4U"),i=n("aR8+");n("p5Ee").a.production&&n.i(s.a)(),n.i(a.a)().bootstrapModule(i.a)},efyd:function(e,t){e.exports='<div class="header">\n  <div class="header-content">\n    <img class="bitpay-logo" src="assets/img/bitpay-logo-negative.svg" alt="Bitpay">\n    <div class="header-center">\n      <h3 class="header-title">Recovery Tool v8</h3>\n      <div class="repository-link">\n        <a href="https://github.com/bitpay/copay-recovery" target="blank">\n          <img src="assets/img/github.png" alt="Github">\n        </a>\n      </div>\n    </div>\n    <img class="copay-logo" src="assets/img/copay-logo-negative.svg" alt="Copay">\n  </div>\n</div>\n<div [hidden]="!showLoadingSpinner" class="no-clickable-background">\n  <div class="loading-message">\n    <h5>Please wait</h5>\n    <h5>This process could take several minutes</h5>\n    <PRE *ngIf="(reportAddresses || reportAmount || reportInactive) && beforeScan">\n      <div class="labels">\n        Active addresses found:\n        Total funds found:\n        Inactive Addresses Streak:\n      </div>\n      <div class="values">\n        {{reportAddresses}}\n        {{reportAmount}}\n        {{reportInactive}}\n      </div>\n    </PRE>\n    <div>\n      <button type="button" (click)="ngOnInit()" class="btn btn-outline-default btn-lg">Cancel</button>\n    </div>\n  </div>\n</div>\n<div class="container">\n\n  <div [hidden]="!successMessage" class="alert alert-success">{{successMessage}}</div>\n  <div [hidden]="!errorMessage" class="alert alert-danger">{{errorMessage}}</div>\n  <div [hidden]="!statusMessage" class="alert alert-info">{{statusMessage}}</div>\n\n  <form #processInputsForm="ngForm" (ngSubmit)="processInputs()" *ngIf="beforeScan">\n\n    <div class="card">\n      <div class="card-block">\n        <h4 class="card-title">WALLET CONFIGURATION</h4>\n        <div class="row">\n          <div class="col-sm-12 col-xs-12 first-row">\n            <div class="form-group signatures">\n              <label for="signaturesNumber">Required number of signatures</label>\n              <select class="form-control" id="signaturesNumber" name="signaturesNumber" [(ngModel)]="signaturesNumber">\n                <option *ngFor="let option of availableOptions" [ngValue]="option">{{option}}</option>\n              </select>\n            </div>\n\n            <div class="form-group copayers">\n              <label for="copayersNumber">Total number of Copayers</label>\n              <select class="form-control" id="copayersNumber" name="copayersNumber" [(ngModel)]="copayersNumber" (ngModelChange)="updateCopayersForm($event)">\n                <option *ngFor="let option of availableOptions" [ngValue]="option">{{option}}</option>\n              </select>\n            </div>\n          </div>\n\n          <div class="form-group col-sm-6 col-xs-12">\n            <label for="chain">Chain: Bitcoin</label>\n            <span *ngIf="chain == \'btc/livenet\'">livenet</span>\n            <span *ngIf="chain == \'btc/testnet\'">testnet</span>\n            <span *ngIf="chain == \'bch/livenet\'">Cash livenet</span>\n            <span *ngIf="chain == \'bch/testnet\'">Cash testnet</span>\n            <span *ngIf="chain == \'bsv/livenet\'">Satoshi livenet</span>\n            <div class="chain-select">\n              <select class="form-control" id="chain" name="chain" [(ngModel)]="chain">\n                <option *ngFor="let chain of availableChains" [ngValue]="chain">{{chain}}</option>\n              </select>\n              <div class="chain-logo-container">\n                <img src="assets/img/icon-btc.svg" class="chain-logo" *ngIf="chain == \'btc/livenet\'">\n                <img src="assets/img/icon-testnet.svg" class="chain-logo" *ngIf="chain == \'btc/testnet\' || chain == \'bch/testnet\'">\n                <img src="assets/img/icon-bch.svg" class="chain-logo" *ngIf="chain == \'bch/livenet\'">\n              </div>\n            </div>\n          </div>\n\n          <div class="form-group col-sm-3 col-xs-12">\n            <label for="addressGap">Address Gap*</label>\n            <input type="number" min="0" class="form-control" id="addressGap" name="addressGap" [(ngModel)]="addressGap" required>\n          </div>\n          <div class="form-group col-sm-3 col-xs-12">\n            <label for="account">Account*</label>\n            <input type="number" min="0" class="form-control" id="account" name="account" [(ngModel)]="account" required>\n          </div>\n          <div class="col-sm-6 offset-sm-6 col-xs-12">\n            <small>*Usually does not need to be changed</small>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="card" *ngFor="let copayer of copayers">\n      <div class="card-block">\n        <h6 class="card-title">Backup for copayer {{copayer}}:</h6>\n        <div class="row">\n          <div class="form-group col-sm-6">\n            <label for="dataBackUp">Recovery phrase (mnemonic) or File/Text backup</label>\n            <input type="text" class="form-control" id="dataBackUp-{{copayer}}" name="dataBackUp-{{copayer}}" [(ngModel)]="data.backUp[copayer]" autocomplete="off">\n          </div>\n\n          <div class="form-group col-sm-6">\n            <label for="contentFile">Or upload a File/Text backup:</label>\n            <input type="file" class="form-control-file" id="contentFile" name="contentFile" accept=".json, .txt" aria-describedby="contentFileHelp" (change)="fileChangeEvent($event, copayer)">\n            <small id="fileHelp" class="form-text text-muted">Extensions accepted: .json and .txt</small>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label for="dataPass">Backup password:</label><small> (in case you have one)</small>\n          <input type="password" class="form-control" id="dataPass-{{copayer}}" name="dataPass-{{copayer}}" [(ngModel)]="data.pass[copayer]" autocomplete="off">\n        </div>\n\n        <div class="form-group">\n          <label for="dataPassX">Encrypted private key password</label><small> (encrypt password)</small>\n          <input type="password" class="form-control" id="dataPassX-{{copayer}}" name="dataPassX-{{copayer}}" [(ngModel)]="data.passX[copayer]" autocomplete="off">\n        </div>\n      </div>\n    </div>\n\n\n    <div class="form-group">\n      <label>\n        <input type="checkbox" [(ngModel)]="termsAccepted" name="termsAccepted">\n        I have read and accept <a href="https://copay.io/disclaimer" target="_blank">Terms and Conditions</a>\n      </label>\n    </div>\n\n    <button type="submit" [disabled]="!processInputsForm.form.valid  || showLoadingSpinner || !termsAccepted" class="btn btn-primary btn-lg btn-block">\n      <span *ngIf="chain == \'btc/livenet\' || chain == \'btc/testnet\'">Scan BTC Wallet</span>\n      <span *ngIf="chain == \'bch/livenet\' || chain == \'bch/testnet\'">Scan BCH Wallet</span>\n      <span *ngIf="chain == \'bsv/livenet\'">Scan BSV Wallet</span>\n    </button>\n  </form>\n\n  <form #sendFundsForm="ngForm" (ngSubmit)="sendFunds(destinationAddress, chain)" *ngIf="!beforeScan && !done">\n    <div class="card">\n      <div class="card-block">\n        <h6 class="card-title">{{totalBalanceStr}}</h6>\n        <div class="input-group" *ngIf="!insufficentsFunds">\n          <div class="input-group-addon">Destination Address:</div>\n          <input type="text" class="form-control" id="destinationAddress" name="destinationAddress" [(ngModel)]="destinationAddress" required>\n        </div>\n      </div>\n    </div>\n    <button type="submit" *ngIf="!insufficentsFunds" [disabled]="!sendFundsForm.form.valid || showLoadingSpinner" class="btn btn-primary btn-lg btn-block">Transfer</button>\n  </form>\n\n  <button type="button" (click)="viewOnBlockchain()" *ngIf="broadcasted" class="btn btn-outline-primary btn-lg btn-block">View on blockchain</button>\n  <button type="button" (click)="ngOnInit()" *ngIf="!beforeScan" class="btn btn-outline-primary btn-lg btn-block">Go\n    back</button>\n\n  <div [hidden]="!showLoadingSpinner">\n    <div class="s1">\n      <div class="s b sb1"></div>\n      <div class="s b sb2"></div>\n      <div class="s b sb3"></div>\n      <div class="s b sb4"></div>\n    </div>\n    <div class="s2">\n      <div class="s b sb5"></div>\n      <div class="s b sb6"></div>\n      <div class="s b sb7"></div>\n      <div class="s b sb8"></div>\n    </div>\n    <div class="bigcon">\n      <div class="big b"></div>\n    </div>\n  </div>\n\n</div>'},n7du:function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="n7du"},p5Ee:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var s={production:!0}},wQAS:function(e,t,n){"use strict";var s=n("/oeL"),a=n("xrDH"),i=(n.n(a),n("6kpM"));n.d(t,"a",function(){return c});var o=this&&this.__decorate||function(e,t,n,s){var a,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e){this.recoveryService=e,this.copayers=[1],this.addressGap=20,this.account=0,this.data={backUp:[],pass:[],passX:[],gap:this.addressGap},this.availableOptions=[1,2,3,4,5,6],this.availableChains=["btc/livenet","btc/testnet","bch/livenet","bch/testnet","bsv/livenet"],this.fee=.001,this.signaturesNumber=this.availableOptions[0],this.copayersNumber=this.availableOptions[0],this.chain=this.availableChains[0],this.statusMessage=null,this.successMessage=null,this.errorMessage=null,this.done=!1,this.broadcasted=!1,this.insufficentsFunds=!1,this.termsAccepted=!1}e.prototype.ngOnInit=function(){this.hideMessage(),this.beforeScan=!0,this.done=!1,this.broadcasted=!1,this.insufficentsFunds=!1,this.destinationAddress="",this.txid=null,this.checkAngularCryptoConfig(),this.recoveryService.activeAddrCoinType="",this.showLoadingSpinner=!1,this.recoveryService.stopSearching=!0},e.prototype.checkAngularCryptoConfig=function(){var e=this.recoveryService.checkAngularCryptoConfig();e&&this.showMessage(e,3)},e.prototype.updateCopayersForm=function(){this.copayers=a.map(a.range(1,this.copayersNumber+1),function(e){return e})},e.prototype.processInputs=function(){var e=this;this.hideMessage(),this.showLoadingSpinner=!0,this.beforeScan=!0,this.recoveryService.stopSearching=!1;var t=a.map(a.range(1,this.copayersNumber+1),function(t){return{backup:e.data.backUp[t]||"",password:e.data.pass[t]||"",xPrivPass:e.data.passX[t]||""}});this.chain.match(/bch/)?(this.network=this.chain.replace("bch/",""),this.coin="bch",this.fee=1e-4):this.chain.match(/bsv/)?(this.network=this.chain.replace("bsv/",""),this.coin="bsv",this.fee=1e-4):(this.network=this.chain.replace("btc/",""),this.coin="btc",this.fee=.001);try{this.wallet=this.recoveryService.getWallet(t,this.signaturesNumber,this.copayersNumber,this.coin,this.network)}catch(e){return this.showLoadingSpinner=!1,this.showMessage(e.message,3)}this.showMessage("Scanning funds...",1);var n=function(t,n){var s;s="bsv"===e.coin?a.sumBy(a.flatten(a.map(n,"utxo")),"amount"):a.sumBy(n,"balance");var i=s.toFixed(8)+" ";e.reportInactive=t,e.reportAmount=i+" "+e.wallet.coin.toUpperCase(),e.reportAddresses=n.length},s=+this.addressGap;s=s||20,this.recoveryService.scanWallet(this.wallet,this.coin,s,this.account,n,function(t,n){if(t){var s=t.message?t.message:t;return e.showMessage(s,3)}e.scanResults=n,console.log("## Total balance:",e.scanResults.balance.toFixed(8)+" "+e.wallet.coin.toUpperCase()),e.recoveryService.stopSearching||(e.showMessage("Search completed",2),e.showLoadingSpinner=!1,e.beforeScan=!1,e.totalBalance=e.scanResults.balance.toFixed(8),e.totalBalanceStr="Available balance: "+e.scanResults.balance.toFixed(8)+" "+e.wallet.coin.toUpperCase(),e.scanResults.balance-e.fee<=0&&(e.scanResults.balance>0&&(e.totalBalanceStr+=". Insufficient funds."),e.insufficentsFunds=!0))})},e.prototype.fileChangeEvent=function(e,t){this.readThis(e.target,t)},e.prototype.readThis=function(e,t){var n=this,s=e.files[0],a=new FileReader;a.readAsText(s),a.onloadend=function(e){n.data.backUp[t]=a.result}},e.prototype.sendFunds=function(e,t){var n=this,s="A total of "+this.totalBalance+" will be send to: \n\nDestination address: "+e+"\nChain: "+t.substring(0,3).toUpperCase();if(confirm(s)){var a;this.showLoadingSpinner=!0;try{a=this.recoveryService.createRawTx(e,this.scanResults,this.wallet,this.fee)}catch(e){return this.showMessage(e.message,3)}this.done=!0,this.recoveryService.txBroadcast(a,this.coin,this.network).subscribe(function(t){n.txid="bsv"===n.coin?t.data.transaction_hash:t.txid;var s=(n.scanResults.balance-n.fee).toFixed(8)+" "+n.wallet.coin.toUpperCase()+" sent to address: "+e+". Transaction ID:"+n.txid;n.showMessage(s,2),n.broadcasted=!0,console.log("Transaction complete. "+(n.scanResults.balance-n.fee)+" TX sent to address: "+e),console.log("Transaction id: ",n.txid)},function(){n.showMessage("Could not broadcast transaction. Please, try later. Raw Tx:"+a,3)})}},e.prototype.viewOnBlockchain=function(){var e;switch(this.chain){case"btc/livenet":e="https://insight.bitcore.io/#/BTC/mainnet/tx/";break;case"btc/testnet":e="https://insight.bitcore.io/#/BTC/testnet/tx/";break;case"bch/livenet":e="https://insight.bitcore.io/#/BCH/mainnet/tx/";break;case"bch/testnet":e="https://insight.bitcore.io/#/BCH/testnet/tx/";break;case"bsv/livenet":e="https://bchsvexplorer.com/tx/";break;default:e="https://insight.bitcore.io/#/BTC/mainnet/tx/"}window.open(e+this.txid,"_blank").focus()},e.prototype.hideMessage=function(){this.statusMessage=null,this.successMessage=null,this.errorMessage=null},e.prototype.showMessage=function(e,t){1===t?(this.statusMessage=e,this.successMessage=null,this.errorMessage=null):2===t?(this.successMessage=e,this.statusMessage=null,this.errorMessage=null,this.showLoadingSpinner=!1):3===t&&(this.errorMessage=e,this.statusMessage=null,this.successMessage=null,this.showLoadingSpinner=!1),setTimeout(function(){window.scrollTo(0,1)},150)};var t;return e=o([n.i(s._5)({selector:"app-root",template:n("efyd"),styles:[n("W675")],providers:[i.a]}),r("design:paramtypes",["function"==typeof(t=void 0!==i.a&&i.a)&&t||Object])],e)}()}},[5]);